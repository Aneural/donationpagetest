<!DOCTYPE html>
<html lang="es-NI">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="./css/styles.css">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Abel&family=Edu+SA+Beginner&family=Fjalla+One&family=Fraunces:opsz,wght@9..144,700&family=Kalam:wght@300&family=Koulen&family=Montserrat:wght@500;700&family=Nanum+Gothic&family=Noto+Sans+Mono:wght@300&family=Nunito+Sans:ital,wght@0,300;1,300&family=Outfit:wght@300;400;700&family=Overpass:wght@700&family=Quicksand&family=Roboto+Mono&family=Roboto:wght@100;300;500;700&family=Secular+One&display=swap" rel="stylesheet">
		<script src="https://kit.fontawesome.com/f98d5dac8a.js" crossorigin="anonymous"></script>
		<script type="text/javascript" src="https//www.paypal.com/sdk/js?client-id=AbIC78UeX3_qXS6N2lfZsgmA3sgSH1ZkQysC_wpl1Zq2fx4RUq5MV3WYkuc_rh8ya40oZX2PG3-5kPGx"></script>
	</head>
	<body>
		<main>
			<header>
				<img class="logo-header" src="./images/ex-fm-logo-svgrepo-com.svg">
				<p class="light-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque et laudantium tempore ut modi quidem. Pariatur quia voluptatibus ut, sit placeat perferendis quibusdam at, adipisci cum odio, culpa laborum iure.</p>
			</header>
			<div class="content">
				<h1>Lorem ipsum dolor</h1>
				<p class="light-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Suscipit sunt, adipisci quibusdam saepe corrupti officia libero error architecto ipsa blanditiis illum. Placeat vel suscipit iure minima quisquam inventore sed incidunt! Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ducimus nam assumenda veniam dolore ipsam tenetur temporibus, officiis impedit minus expedita veritatis, a iusto! Repellendus corrupti unde totam molestias reiciendis labore. Lorem ipsum dolor sit amet consectetur adipisicing elit. Laudantium, mollitia! Repudiandae est illo quaerat maiores iusto mollitia dolor! Eum molestias consectetur laboriosam qui distinctio id repellendus aliquam mollitia incidunt modi.</p>
				<div id="smart-button-container" class="button-container-style">
					<div style="visibility: hidden; text-align: center"><label for="description"> </label><input type="text" name="descriptionInput" id="description" maxlength="127" value="N.1"></div>
					  <p id="descriptionError" style="visibility: hidden; color:rgb(255, 111, 111); text-align: center;">Please enter a description</p>
					<div style="text-align: center" class="input-amount"><label for="amount">Donación </label><input class="quantity" name="amountInput" type="number" id="amount" value="" placeholder="Cantidad USD"></div>
					  <p id="priceLabelError" style="visibility: hidden; color:rgb(255, 111, 111); text-align: center;">Por favor ingresa una cantidad</p>
					<div id="invoiceidDiv" style="text-align: center; display: none;"><label for="invoiceid"> </label><input name="invoiceid" maxlength="127" type="text" id="invoiceid" value="" ></div>
					  <p id="invoiceidError" style="visibility: hidden; color:rgb(255, 111, 111); text-align: center;">Please enter an Invoice ID</p>
					<div style="text-align: center; margin-top: 0.625rem;" id="paypal-button-container"></div>
				  </div>
				  <script src="https://www.paypal.com/sdk/js?client-id=sb&enable-funding=venmo&currency=USD" data-sdk-integration-source="button-factory"></script>
				  <script>
				  function initPayPalButton() {
					var description = document.querySelector('#smart-button-container #description');
					var amount = document.querySelector('#smart-button-container #amount');
					var descriptionError = document.querySelector('#smart-button-container #descriptionError');
					var priceError = document.querySelector('#smart-button-container #priceLabelError');
					var invoiceid = document.querySelector('#smart-button-container #invoiceid');
					var invoiceidError = document.querySelector('#smart-button-container #invoiceidError');
					var invoiceidDiv = document.querySelector('#smart-button-container #invoiceidDiv');
				
					var elArr = [description, amount];
				
					if (invoiceidDiv.firstChild.innerHTML.length > 1) {
					  invoiceidDiv.style.display = "block";
					}
				
					var purchase_units = [];
					purchase_units[0] = {};
					purchase_units[0].amount = {};
				
					function validate(event) {
					  return event.value.length > 0;
					}
				
					paypal.Buttons({
					  style: {
						color: 'gold',
						shape: 'pill',
						label: 'paypal',
						layout: 'vertical',
						
					  },
				
					  onInit: function (data, actions) {
						actions.disable();
				
						if(invoiceidDiv.style.display === "block") {
						  elArr.push(invoiceid);
						}
				
						elArr.forEach(function (item) {
						  item.addEventListener('keyup', function (event) {
							var result = elArr.every(validate);
							if (result) {
							  actions.enable();
							} else {
							  actions.disable();
							}
						  });
						});
					  },
				
					  onClick: function () {
						if (description.value.length < 1) {
						  descriptionError.style.visibility = "visible";
						} else {
						  descriptionError.style.visibility = "hidden";
						}
				
						if (amount.value.length < 1) {
						  priceError.style.visibility = "visible";
						} else {
						  priceError.style.visibility = "hidden";
						}
				
						if (invoiceid.value.length < 1 && invoiceidDiv.style.display === "block") {
						  invoiceidError.style.visibility = "visible";
						} else {
						  invoiceidError.style.visibility = "hidden";
						}
				
						purchase_units[0].description = description.value;
						purchase_units[0].amount.value = amount.value;
				
						if(invoiceid.value !== '') {
						  purchase_units[0].invoice_id = invoiceid.value;
						}
					  },
				
					  createOrder: function (data, actions) {
						return actions.order.create({
						  purchase_units: purchase_units,
						});
					  },
				
					  onApprove: function (data, actions) {
						return actions.order.capture().then(function (orderData) {
				
						  // Full available details
						  console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
				
						  // Show a success message within this page, e.g.
						  const element = document.getElementById('paypal-button-container');
						  element.innerHTML = '';
						  element.innerHTML = '<h3>Gracias por tu donación!</h3>';
				
						  // Or go to another URL:  actions.redirect('thank_you.html');
						  
						});
					  },
				
					  onError: function (err) {
						console.log(err);
					  }
					}).render('#paypal-button-container');
				  }
				  initPayPalButton();
				  </script>
		</main>
	</body>
</html>